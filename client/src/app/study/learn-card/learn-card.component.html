@if (!sessionId()) {
<div class="start-state">
  <mat-icon class="start-icon">school</mat-icon>
  <h2>Ready to study?</h2>
  <p>Click start to begin your study session.</p>
  <button mat-flat-button color="primary" (click)="startSession()" aria-label="Start study session">
    <mat-icon>play_arrow</mat-icon>
    Start
  </button>
</div>
} @else if (currentCardData.isLoading()) {
<div class="learn-card-container">
  <div class="learn-card">
    <app-learn-card-skeleton />
  </div>
</div>
} @else if (card() === null || card() === undefined) {
<div class="empty-state">
  <mat-icon class="empty-icon">school</mat-icon>
  <h2>All caught up!</h2>
  <p>No cards are due for review right now.</p>
  <p>Great job keeping up with your studies! ðŸŽ‰</p>
</div>
} @else {
<div class="learn-card-container">
  <div
    class="learn-card"
    [class.revealed]="isRevealed()"
    (click)="toggleReveal()"
  >
    @if (isStudyingWithPartner()) {
    <span class="turn-indicator" role="status" aria-label="Current turn" aria-live="polite">
      {{ currentTurn().name }}
    </span>
    }
    <app-card-actions
      [card]="cardResource"
      [languageTexts]="languageTexts()"
      (cardProcessed)="onCardProcessed()">
    </app-card-actions>

    <app-learn-vocabulary-card
      [card]="cardResource"
      [isRevealed]="isRevealed()"
      [onPlayAudio]="playAudioForContent.bind(this)"
      (languageTextsReady)="onLanguageTextsReady($event)">
    </app-learn-vocabulary-card>
  </div>

  @if (isRevealed()) {
    <app-card-grading-buttons
      [card]="cardResource"
      [learningPartnerId]="currentPresenter().partnerId"
      (cardProcessed)="onCardProcessed()">
    </app-card-grading-buttons>
  }
</div>
}
