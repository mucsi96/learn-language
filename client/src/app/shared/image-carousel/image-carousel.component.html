@let imgs = images();
@if (imgs && imgs.length) {
  @let imageResource = currentImage();
  @let url = imageResource?.value()?.url;
  <div class="image">
    @if (!imageResource) {
      <mat-icon>image_not_supported</mat-icon>
    } @else if (imageResource.isLoading()) {
      <div class="skeleton"></div>
    } @else if (url) {
      <img [src]="url" [alt]="altText()" />
      <div
        class="image-overlay"
        [class.image-overlay-favorite]="imageResource.value()?.isFavorite"
      >
        <button
          mat-icon-button
          (click)="toggleFavorite()"
          aria-label="Toggle favorite"
          [color]="imageResource.value()?.isFavorite ? 'warn' : ''"
          [attr.aria-pressed]="imageResource.value()?.isFavorite"
        >
          <mat-icon>{{
            imageResource.value()?.isFavorite ? "favorite" : "favorite_border"
          }}</mat-icon>
        </button>
      </div>
    } @else {
      <mat-icon>image_not_supported</mat-icon>
    }
    @if (imageResource?.value()?.model) {
      <span class="model-name">{{ imageResource.value()?.model }}</span>
    }
    <div class="carousel-controls">
      <button
        mat-icon-button
        (click)="prevImage()"
        [disabled]="!hasPrevious()"
        aria-label="Previous image"
      >
        <mat-icon>chevron_left</mat-icon>
      </button>
      <span class="carousel-indicator">
        {{ currentIndex() + 1 }} / {{ imgs.length }}
      </span>
      <button
        mat-icon-button
        (click)="nextImage()"
        [disabled]="!hasNext()"
        aria-label="Next image"
      >
        <mat-icon>chevron_right</mat-icon>
      </button>
    </div>
  </div>
}
