@if (loading()) {
<mat-spinner class="page-loading" />
} @else {
<div class="header">
  <div>
    <h1>Sources</h1>
    <p>Select a source to manage:</p>
  </div>
  <button
    mat-flat-button
    (click)="openAddSourceDialog()"
    class="add-button"
  >
    <mat-icon>add</mat-icon>
    Add Source
  </button>
</div>
@if (sources()?.length) {
<section class="sources" aria-label="Sources list">
  @for (source of sources(); track source.id) {
  <article
    class="card-wrapper"
    [class.selected]="selectedSourceId() === source.id"
    [attr.aria-label]="source.name"
    [attr.aria-selected]="selectedSourceId() === source.id"
    (click)="selectSource(source)"
  >
    <mat-card>
      <mat-card-content>
        <h2 class="source-title">
          {{ source.name }}
        </h2>
        @if (source.languageLevel) {
        <p class="language-level">{{ source.languageLevel }}</p>
        }
        <p class="card-count">
          {{ source.cardCount || 0 }} cards
        </p>
      </mat-card-content>
    </mat-card>
  </article>
  }
</section>
@if (selectedSource()) {
<nav class="source-actions" aria-label="Source actions">
  <button
    mat-fab
    extended
    class="action-fab delete-fab"
    (click)="openDeleteConfirmDialog()"
  >
    <mat-icon>delete</mat-icon>
    Delete
  </button>
  <button
    mat-fab
    extended
    class="action-fab edit-fab"
    (click)="openEditSourceDialog()"
  >
    <mat-icon>edit</mat-icon>
    Edit
  </button>
  <button
    mat-fab
    extended
    class="action-fab cards-fab"
    (click)="navigateToCards()"
  >
    <mat-icon>style</mat-icon>
    Cards
  </button>
  <button
    mat-fab
    extended
    color="primary"
    class="action-fab"
    (click)="navigateToPages()"
  >
    <mat-icon>menu_book</mat-icon>
    Pages
  </button>
</nav>
}
} @else {
<div class="empty-state">
  <mat-icon class="empty-icon">library_books</mat-icon>
  <h2>No sources yet</h2>
  <p>Create your first source to start adding cards.</p>
</div>
}
}
