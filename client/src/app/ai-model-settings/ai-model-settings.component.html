<div class="ai-model-settings-container">
  <mat-card>
    <mat-card-header>
      <mat-card-title><h2>AI Model Settings</h2></mat-card-title>
      <a
        mat-icon-button
        routerLink="/model-usage"
        matTooltip="View model usage logs"
        aria-label="View model usage logs"
      >
        <mat-icon>analytics</mat-icon>
      </a>
    </mat-card-header>
    <mat-card-content>
      <div class="table-wrapper">
        @if (isLoading()) {
        <table class="matrix-table">
          <thead>
            <tr>
              <th class="model-header"></th>
              @for (i of [1, 2, 3, 4, 5]; track i) {
              <th class="operation-header">
                <div class="skeleton skeleton-header"></div>
              </th>
              }
            </tr>
          </thead>
          <tbody>
            @for (j of [1, 2, 3, 4, 5, 6, 7, 8]; track j) {
            <tr>
              <td class="model-cell">
                <div class="skeleton skeleton-model"></div>
              </td>
              @for (i of [1, 2, 3, 4, 5]; track i) {
              <td class="toggle-cell">
                <div class="skeleton skeleton-toggle"></div>
              </td>
              }
            </tr>
            }
          </tbody>
        </table>
        } @else {
        <table class="matrix-table">
          <thead>
            <tr>
              <th class="model-header">Model</th>
              @for (operation of settingsValue(); track operation.operationType) {
              <th class="operation-header">
                <span class="operation-header-text">{{ operation.operationDisplayName }}</span>
              </th>
              }
            </tr>
          </thead>
          <tbody>
            @for (modelName of modelNames(); track modelName) {
            <tr>
              <td class="model-cell">{{ modelName }}</td>
              @for (operation of settingsValue(); track operation.operationType) {
              <td class="toggle-cell">
                <mat-slide-toggle
                  [checked]="isModelEnabled(operation, modelName)"
                  (change)="
                    onToggle(operation.operationType, modelName, $event.checked)
                  "
                  [attr.aria-label]="
                    (isModelEnabled(operation, modelName) ? 'Disable ' : 'Enable ') +
                    modelName +
                    ' for ' +
                    operation.operationDisplayName
                  "
                ></mat-slide-toggle>
              </td>
              }
            </tr>
            }
          </tbody>
        </table>
        }
      </div>
    </mat-card-content>
  </mat-card>
</div>
