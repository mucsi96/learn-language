<div class="sentence-section">
  <mat-form-field class="field">
    <mat-label>German Sentence</mat-label>
    <textarea
      #sentenceInput
      matInput
      [(ngModel)]="sentence"
      aria-label="German sentence"
      rows="3"
    ></textarea>
  </mat-form-field>
  <div class="gap-controls">
    <button
      mat-stroked-button
      (click)="addGapFromSelection()"
      aria-label="Add gap from selection"
    >
      <mat-icon>add_circle</mat-icon>
      Add Gap from Selection
    </button>
  </div>
</div>

<div class="gaps-section">
  <h3>Gaps</h3>
  @if (gapsDisplay().length > 0) {
    <mat-chip-set aria-label="Gaps list">
      @for (gap of gapsDisplay(); track $index) {
        <mat-chip (removed)="removeGap($index)" aria-label="Gap: {{ gap.text }}">
          {{ gap.text }}
          <button matChipRemove aria-label="Remove gap">
            <mat-icon>cancel</mat-icon>
          </button>
        </mat-chip>
      }
    </mat-chip-set>
  } @else {
    <p class="no-gaps-hint">Select text in the sentence above and click "Add Gap from Selection" to create gaps.</p>
  }
</div>

<div class="preview-section">
  <h3>Preview (with gaps)</h3>
  <p class="sentence-preview">{{ sentenceWithGaps() }}</p>
</div>

<div class="images-section">
  <h2>Images</h2>
  <button
    mat-icon-button
    (click)="addImage()"
    aria-label="Add image"
    [disabled]="areImagesLoading()"
  >
    <mat-icon>add_photo_alternate</mat-icon>
  </button>
</div>
@let imgs = images();
@if (imgs && imgs.length) {
  <app-image-grid
    [images]="imgs"
    [altText]="sentence() ?? ''"
    (favoriteToggled)="onFavoriteToggled($event)"
  />
}
