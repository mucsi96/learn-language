<div class="image-model-settings-container">
  <mat-card>
    <mat-card-header>
      <mat-card-title><h2>Image Models</h2></mat-card-title>
    </mat-card-header>
    <mat-card-content>
      @if (imageModels().length === 0) {
        <div class="empty-state">
          <p>No image models available</p>
        </div>
      } @else {
        <div class="models-list">
          <table class="models-table" aria-label="Image model settings">
            <thead>
              <tr>
                <th class="model-header">Model</th>
                <th class="count-header">Images per card</th>
              </tr>
            </thead>
            <tbody>
              @for (model of imageModels(); track model.id) {
                <tr>
                  <td class="model-name-cell">{{ model.displayName }}</td>
                  <td class="count-cell">
                    <mat-form-field class="count-field">
                      <input
                        matInput
                        type="number"
                        [value]="model.imageCount"
                        (change)="onImageCountChange(model.id, $event)"
                        min="0"
                        [attr.aria-label]="'Image count for ' + model.displayName"
                      />
                    </mat-form-field>
                  </td>
                </tr>
              }
            </tbody>
          </table>
        </div>
      }
    </mat-card-content>
  </mat-card>

  <mat-card>
    <mat-card-header>
      <mat-card-title><h2>Rate Limit</h2></mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div class="rate-limit-form">
        <mat-form-field>
          <mat-label>Requests per minute</mat-label>
          <input
            matInput
            type="number"
            [formField]="rateLimitForm.rateLimitPerMinute"
            aria-label="Image rate limit per minute"
          />
        </mat-form-field>
        <mat-form-field>
          <mat-label>Max concurrent requests</mat-label>
          <input
            matInput
            type="number"
            [formField]="rateLimitForm.maxConcurrentRequests"
            aria-label="Image max concurrent requests"
          />
        </mat-form-field>
      </div>
    </mat-card-content>
  </mat-card>
</div>
